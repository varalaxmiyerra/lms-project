<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Analytics - LMS Dashboard</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <link href="dashboard-ui-update.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h2>ADMIN DASHBOARD</h2>
      </div>
      <ul class="sidebar-menu">
        <li><a href="dashboard.html"><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a></li>
        <li><a href="trainers.html"><i class="fas fa-chalkboard-teacher"></i><span>Trainer</span></a></li>
        <li><a href="student.html"><i class="fas fa-user-graduate"></i><span>Student</span></a></li>
        <li><a href="courses.html"><i class="fas fa-book"></i><span>Courses</span></a></li>
        <li><a href="analytics.html" class="active"><i class="fas fa-chart-bar"></i><span>Analytics</span></a></li>
        <li><a href="material.html"><i class="fas fa-file-alt"></i><span>Material Page</span></a></li>
        <li><a href="#"><i class="fas fa-video"></i><span>Video Page</span></a></li>
        <li><a href="#"><i class="fas fa-info-circle"></i><span>About Page</span></a></li>
        <li><a href="#"><i class="fas fa-envelope"></i><span>Contact Page</span></a></li>
        <li><a href="#"><i class="fas fa-cog"></i><span>Settings Page</span></a></li>
      </ul>
    </aside>

    <!-- Top Navbar -->
    <nav class="top-navbar redesigned-navbar">
      <div class="navbar-left">
        <button class="menu-toggle" id="menu-toggle" aria-label="Toggle Menu">
          <i class="fas fa-bars"></i>
        </button>
        <div class="search-bar">
          <input type="text" placeholder="Search analytics...">
          <button><i class="fas fa-search"></i></button>
        </div>
      </div>
      <div class="navbar-right">
        <button class="navbar-icon" id="notifications">
          <i class="fas fa-bell"></i>
          <span class="notification-badge">3</span>
        </button>
        <div class="profile-info">
          <span class="profile-name">vara</span>
          <img src="https://res.cloudinary.com/ds3wuvkwo/image/upload/v1757430111/Screenshot_217_dys7md.png" alt="Profile Picture" class="profile-pic" />
        </div>
        <button class="navbar-icon" id="logout">
          <i class="fas fa-sign-out-alt"></i>
        </button>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content" id="main-content">
      <div class="content-header">
        <h1>Analytics & Reports</h1>
        <p>Comprehensive insights into your learning management system performance</p>
      </div>

      <!-- Analytics Stats Cards -->
      <div class="dashboard-cards">
        <div class="card">
          <i class="fas fa-chart-line card-icon"></i>
          <div>
            <h3>Total Views</h3>
            <p>45,230</p>
          </div>
        </div>
        <div class="card">
          <i class="fas fa-clock card-icon"></i>
          <div>
            <h3>Avg. Session Time</h3>
            <p>24m 32s</p>
          </div>
        </div>
        <div class="card">
          <i class="fas fa-users card-icon"></i>
          <div>
            <h3>Active Users</h3>
            <p>1,847</p>
          </div>
        </div>
        <div class="card">
          <i class="fas fa-star card-icon"></i>
          <div>
            <h3>Avg. Rating</h3>
            <p>4.7</p>
          </div>
        </div>
      </div>

      <!-- Date Range Filter -->
      <div class="filter-section" style="margin-bottom: 30px;">
        <div class="filter-controls" style="display: flex; gap: 15px; align-items: center;">
          <label for="date-range">Date Range:</label>
          <select id="date-range" style="padding: 8px 12px; border-radius: 6px; border: 1px solid #a3c9a8;">
            <option value="7days">Last 7 Days</option>
            <option value="30days">Last 30 Days</option>
            <option value="90days">Last 90 Days</option>
            <option value="1year">Last Year</option>
          </select>
          <button class="btn-primary" id="export-analytics-btn" style="padding: 8px 16px;">
            <i class="fas fa-download"></i> Export Report
          </button>
        </div>
      </div>

      <!-- Analytics Charts Row 1 -->
      <div class="graphs-row">
        <div class="graph-container">
          <h3>User Engagement Trends</h3>
          <canvas id="engagementChart" style="height: 500px; width: 100%;"></canvas>
        </div>
        <div class="graph-container">
          <h3>Course Popularity</h3>
          <canvas id="popularityChart" style="height: 500px; width: 100%;"></canvas>
        </div>
      </div>

      <!-- Analytics Charts Row 2 -->
      <div class="graphs-row">
        <div class="graph-container">
          <h3>Revenue Analytics</h3>
          <canvas id="revenueChart" style="height: 500px; width: 100%;"></canvas>
        </div>
        <div class="graph-container">
          <h3>Geographic Distribution</h3>
          <canvas id="geographicChart" style="height: 500px; width: 100%;"></canvas>
        </div>
      </div>

      <!-- Detailed Analytics Section -->
      <div class="analytics-details" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 30px;">
        <div class="card">
          <h3>Top Performing Courses</h3>
          <ul style="list-style: none; padding: 0;">
            <li style="display: flex; justify-content: space-between; margin-bottom: 10px;">
              <span>Advanced JavaScript</span>
              <span style="color: #14a191; font-weight: bold;">95% completion</span>
            </li>
            <li style="display: flex; justify-content: space-between; margin-bottom: 10px;">
              <span>Python for Data Science</span>
              <span style="color: #14a191; font-weight: bold;">92% completion</span>
            </li>
            <li style="display: flex; justify-content: space-between; margin-bottom: 10px;">
              <span>Web Development Bootcamp</span>
              <span style="color: #14a191; font-weight: bold;">88% completion</span>
            </li>
          </ul>
        </div>
        <div class="card">
          <h3>Student Progress Insights</h3>
          <div style="display: flex; flex-direction: column; gap: 15px;">
            <div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <span>On Track</span>
                <span>68%</span>
              </div>
              <div style="background: #e6f3e6; height: 8px; border-radius: 4px;">
                <div style="background: #14a191; height: 100%; width: 68%; border-radius: 4px;"></div>
              </div>
            </div>
            <div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <span>Behind Schedule</span>
                <span>22%</span>
              </div>
              <div style="background: #e6f3e6; height: 8px; border-radius: 4px;">
                <div style="background: #e74684; height: 100%; width: 22%; border-radius: 4px;"></div>
              </div>
            </div>
            <div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                <span>At Risk</span>
                <span>10%</span>
              </div>
              <div style="background: #e6f3e6; height: 8px; border-radius: 4px;">
                <div style="background: #ff9800; height: 100%; width: 10%; border-radius: 4px;"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <h3>System Performance</h3>
          <ul style="list-style: none; padding: 0;">
            <li style="display: flex; justify-content: space-between; margin-bottom: 10px;">
              <span>Page Load Time</span>
              <span style="color: #14a191; font-weight: bold;">1.2s</span>
            </li>
            <li style="display: flex; justify-content: space-between; margin-bottom: 10px;">
              <span>Uptime</span>
              <span style="color: #14a191; font-weight: bold;">99.9%</span>
            </li>
            <li style="display: flex; justify-content: space-between; margin-bottom: 10px;">
              <span>Error Rate</span>
              <span style="color: #e74684; font-weight: bold;">0.1%</span>
            </li>
          </ul>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Sidebar toggle
    const sidebar = document.getElementById('sidebar');
    const menuToggle = document.getElementById('menu-toggle');

    if(menuToggle) {
      menuToggle.addEventListener('click', () => {
        sidebar.classList.toggle('collapsed');
      });
    }

    // Logout functionality
    document.getElementById('logout').addEventListener('click', () => {
      if (confirm('Are you sure you want to logout?')) {
        window.location.href = 'lms_login_new.html';
      }
    });

    // Export analytics report
    document.getElementById('export-analytics-btn').addEventListener('click', () => {
      alert('Analytics report exported successfully!');
    });

    // Responsive sidebar
    window.addEventListener('resize', () => {
      if (window.innerWidth <= 768) {
        sidebar.classList.add('collapsed');
      } else {
        sidebar.classList.remove('collapsed');
      }
    });

    // Initialize
    if (window.innerWidth <= 768) {
      sidebar.classList.add('collapsed');
    }
  </script>

  <!-- Chart.js Scripts -->
  <script>
    // User Engagement Trends Chart
    const ctxEngagement = document.getElementById('engagementChart').getContext('2d');
    const engagementChart = new Chart(ctxEngagement, {
      type: 'line',
      data: {
        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
        datasets: [{
          label: 'Daily Active Users',
          data: [1200, 1350, 1180, 1420, 1380, 950, 1100],
          borderColor: 'rgba(20, 161, 145, 1)',
          backgroundColor: 'rgba(20, 161, 145, 0.1)',
          tension: 0.4,
          fill: true
        }, {
          label: 'Session Duration (min)',
          data: [25, 28, 22, 30, 27, 18, 24],
          borderColor: 'rgba(231, 70, 132, 1)',
          backgroundColor: 'rgba(231, 70, 132, 0.1)',
          tension: 0.4,
          fill: true
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            display: true,
            position: 'top'
          }
        },
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  </script>

  <script>
    // Course Popularity Chart
    const ctxPopularity = document.getElementById('popularityChart').getContext('2d');
    const popularityChart = new Chart(ctxPopularity, {
      type: 'doughnut',
      data: {
        labels: ['JavaScript', 'Python', 'Web Dev', 'Data Science', 'Others'],
        datasets: [{
          data: [35, 25, 20, 15, 5],
          backgroundColor: [
            'rgba(20, 161, 145, 0.8)',
            'rgba(231, 70, 132, 0.8)',
            'rgba(255, 152, 0, 0.8)',
            'rgba(156, 39, 176, 0.8)',
            'rgba(76, 175, 80, 0.8)'
          ],
          borderWidth: 2
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom'
          }
        }
      }
    });
  </script>

  <script>
    // Revenue Analytics Chart
    const ctxRevenue = document.getElementById('revenueChart').getContext('2d');
    const revenueChart = new Chart(ctxRevenue, {
      type: 'bar',
      data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        datasets: [{
          label: 'Monthly Revenue ($)',
          data: [12500, 15200, 13800, 16800, 14200, 18900],
          backgroundColor: 'rgba(20, 161, 145, 0.7)',
          borderColor: 'rgba(20, 161, 145, 1)',
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  </script>

  <script>
    // Geographic Distribution Chart
    const ctxGeographic = document.getElementById('geographicChart').getContext('2d');
    const geographicChart = new Chart(ctxGeographic, {
      type: 'pie',
      data: {
        labels: ['North America', 'Europe', 'Asia', 'South America', 'Others'],
        datasets: [{
          data: [40, 30, 20, 7, 3],
          backgroundColor: [
            'rgba(20, 161, 145, 0.8)',
            'rgba(231, 70, 132, 0.8)',
            'rgba(255, 152, 0, 0.8)',
            'rgba(156, 39, 176, 0.8)',
            'rgba(76, 175, 80, 0.8)'
          ]
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom'
          }
        }
      }
    });
  </script>
</body>
</html>
